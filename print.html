<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Vit testing</title>
        <meta name="robots" content="noindex" />
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <!-- MathJax -->
        <script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="introduction.html">Introduction</a></li><li class="chapter-item expanded "><a href="iapyx/iapyx.html"><strong aria-hidden="true">1.</strong> Iapyx</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="iapyx/load.html"><strong aria-hidden="true">1.1.</strong> Load Tool</a></li></ol></li><li class="chapter-item expanded "><a href="registration-service/introduction.html"><strong aria-hidden="true">2.</strong> Registration Service</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="registration-service/cli.html"><strong aria-hidden="true">2.1.</strong> CLI</a></li><li class="chapter-item expanded "><a href="registration-service/configuration.html"><strong aria-hidden="true">2.2.</strong> Configuration</a></li></ol></li><li class="chapter-item expanded "><a href="snapshot-service/introduction.html"><strong aria-hidden="true">3.</strong> Snapshot Service</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="snapshot-service/cli.html"><strong aria-hidden="true">3.1.</strong> CLI</a></li><li class="chapter-item expanded "><a href="snapshot-service/configuration.html"><strong aria-hidden="true">3.2.</strong> Configuration</a></li></ol></li><li class="chapter-item expanded "><a href="valgrind/introduction.html"><strong aria-hidden="true">4.</strong> Valgrind</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="valgrind/configuration.html"><strong aria-hidden="true">4.1.</strong> Configuration</a></li></ol></li><li class="chapter-item expanded "><a href="vitup/introduction.html"><strong aria-hidden="true">5.</strong> Vitup</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="vitup/configuration.html"><strong aria-hidden="true">5.1.</strong> Configuration</a></li><li class="chapter-item expanded "><a href="vitup/data_generation.html"><strong aria-hidden="true">5.2.</strong> Data Generation</a></li><li class="chapter-item expanded "><a href="vitup/run_modes.html"><strong aria-hidden="true">5.3.</strong> Run Modes</a></li><li class="chapter-item expanded "><a href="vitup/mock.html"><strong aria-hidden="true">5.4.</strong> Mock</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Vit testing</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="catalyst-testing-user-guide"><a class="header" href="#catalyst-testing-user-guide">Catalyst testing User Guide</a></h1>
<p>Welcome to the Catalyst testing User Guide.</p>
<p>Vit testing is a family of projects, with the aim to support all quality assurance activities in Catalyst. One can find here:</p>
<ul>
<li>catalyst backend deployment tool,</li>
<li>catalyst backend mock,</li>
<li>integration tests,</li>
<li>registration service and registration verify service,</li>
<li>snapshot service,</li>
<li>custom proxy for catalyst backend,</li>
<li>cli voting app implementation,</li>
<li>load driver imitating voting app users.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="iapyx"><a class="header" href="#iapyx">Iapyx</a></h1>
<p>Iapyx is a wallet cli &amp; wallet api project which operates on catalyst-jormungandr network.</p>
<p>WARNING: main purpose of the wallet is testing. Do NOT use it on production.</p>
<h2 id="build--install"><a class="header" href="#build--install">Build &amp; Install</a></h2>
<p>In order to build iapyx in main project folder run:</p>
<pre><code>cd iapyx
cargo build
cargo install --path . --force
</code></pre>
<h2 id="quick-start"><a class="header" href="#quick-start">Quick Start</a></h2>
<h3 id="cli"><a class="header" href="#cli">CLI</a></h3>
<p>Iapyx can be used as a wallet cli. It is capable of sending votes or pull data from node. The simplest usage example is available by using commands:</p>
<ul>
<li>
<p>register new wallet based on qr code:
<code>iapyx wallets import qr qr_file.png --pin 1234</code></p>
</li>
<li>
<p>connect to node rest API:
<code>iapyx connect https://catalyst-backend.io/api</code></p>
</li>
<li>
<p>use recently created wallet for rest of commands:
<code>iapyx wallets use darek</code></p>
</li>
<li>
<p>sync with the node and get wallet data:
<code>iapyx wallets refresh</code></p>
</li>
<li>
<p>send vote:
<code>iapyx vote single --choice yes --pin --id {proposal_id}</code></p>
</li>
</ul>
<h3 id="api"><a class="header" href="#api">API</a></h3>
<p>Iapyx can be used as api in order to perform voting operations from the code:</p>
<pre><code>
    let wallet_proxy = spawn_network(...);
    let secret_file_path = Path::new(&quot;wallet_alice&quot;);
   

    let mut alice = iapyx::ControllerBuilder::default()
        .with_backend_from_client(wallet_proxy.client())?
        .with_wallet_from_secret_file(secret_file_path.as_ref())?
        .build()

    let proposals = alice.proposals().unwrap();
    let votes_data = proposals
        .iter()
        .take(batch_size)
        .map(|proposal| (proposal, Choice::new(0)))
        .collect();

    let fragment_ids = alice
        .votes_batch(votes_data)
        .unwrap()
        .iter()
        .map(|item| item.to_string())
        .collect();
</code></pre>
<h2 id="configuration"><a class="header" href="#configuration">Configuration</a></h2>
<p>Iapyx api doesn't use any configuration files. However cli uses small cache folder on filesystem (located in: <code>~/.iapyx</code>).
The purpose of this configuration is to store wallet lists as well as secret keys guarded by pass phrase.</p>
<h3 id="full-list-of-available-commands"><a class="header" href="#full-list-of-available-commands">full list of available commands</a></h3>
<p>Full list of commands is available on <code>iapyx --help</code> command.</p>
<pre><code>iapyx 0.0.1
Command line wallet for testing Catalyst

USAGE:
    iapyx.exe &lt;SUBCOMMAND&gt;

FLAGS:
    -h, --help       Prints help information
    -V, --version    Prints version information

SUBCOMMANDS:
    address                 Gets address of wallet in bech32 format
    clear-tx                Clears pending transactions to confirm. In case if expiration occurred
    confirm-tx              Confirms successful transaction
    connect                 Sets node rest API address. Verifies connection on set
    funds                   Prints information about voting funds
    help                    Prints this message or the help of the given subcommand(s)
    logs                    Prints entire fragment logs from the node
    pending-transactions    Prints pending transactions (not confirmed)
    proposals               Prints proposals available to vote on
    refresh                 Pulls wallet data from the catalyst backend
    status                  Prints wallet status (balance/spending counters/tokens)
    statuses                Prints pending or already sent fragments statuses
    vote                    Sends votes to backend
    votes                   Prints history of votes
    wallets                 Allows to manage wallets: add/remove/select operations
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="iapyx-load"><a class="header" href="#iapyx-load">Iapyx Load</a></h1>
<p>Iapyx-load is a load cli &amp; api project which operates on catalyst backend.</p>
<h2 id="build--install-1"><a class="header" href="#build--install-1">Build &amp; Install</a></h2>
<p>In order to build iapyx-load in main project folder run:</p>
<pre><code>cd testing/iapyx
cargo build
cargo install --path . --force
</code></pre>
<h2 id="quick-start-1"><a class="header" href="#quick-start-1">Quick Start</a></h2>
<h3 id="cli-1"><a class="header" href="#cli-1">CLI</a></h3>
<p>Iapyx-load can be used as a cli. It is capable of putting various load on catalyst backend.
Available load types:</p>
<ul>
<li>node-only     - Load which targets blockchain calls only</li>
<li>static-only   - Load which targets static data only</li>
<li>simulation    - Load with simulate real user case (both blockchain and static data in some relation)</li>
</ul>
<p>Also <code>node-only</code> load provides two load characteristic:</p>
<ul>
<li>bursts        - Bursts mode. Sends votes in batches and then wait x seconds </li>
<li>const        - Constant load. Sends votes with x votes per second speed</li>
</ul>
<p>And two scenario types:</p>
<ul>
<li>duration      - Duration based load. Defines how much time load should run</li>
<li>count         - Requests count based load. Defines how many requests load should sent in total</li>
</ul>
<p>Simplest load configuration is to use node-only load with below parameters:</p>
<p><code>iapyx-load node-only const count --help</code></p>
<pre><code>USAGE:
    iapyx-load.exe node-only const count [FLAGS] [OPTIONS] --requests-per-thread &lt;count&gt;

FLAGS:
        --debug                   Print additional information
        --help                    Prints help information
        --read-from-filename      Read pin from filename of each qr code
        --reuse-accounts-early    Update all accounts state before sending any vote
        --reuse-accounts-lazy     Update account state just before sending vote
    -h, --https                   Use https for sending fragments
    -V, --version                 Prints version information

OPTIONS:
    -a, --address &lt;address&gt;                        Address in format: 127.0.0.1:8000 [default: 127.0.0.1:8000]
    -n, --requests-per-thread &lt;count&gt;              How many requests per thread should be sent
    -c, --criterion &lt;criterion&gt;                    Pass criteria
    -d, --delay &lt;delay&gt;                            Amount of delay [miliseconds] between requests [default: 10000]
        --global-pin &lt;global-pin&gt;                  Global pin for all qr codes [default: 1234]
    -b, --progress-bar-mode &lt;progress-bar-mode&gt;
            Show progress. Available are (Monitor,Standard,None) [default: Monitor]

    -q, --qr-codes-folder &lt;qr-codes-folder&gt;        Qr codes source folder
    -s, --secrets-folder &lt;secrets-folder&gt;          Secrets source folder
        --status-pace &lt;status-pace&gt;                How frequent (in seconds) to print status [default: 1]
    -t, --threads &lt;threads&gt;                        Prints nodes related data, like stats,fragments etc [default: 3]
</code></pre>
<h3 id="api-1"><a class="header" href="#api-1">API</a></h3>
<p>Iapyx load main purpose is to serve as load api:</p>
<pre><code>use iapyx::{NodeLoad, NodeLoadConfig};
use jortestkit::{
    load::{ConfigurationBuilder, Monitor},
    measurement::Status,
};

...

    let no_of_threads = 10;
    let no_of_wallets = 40_000;
   
    let mut qr_codes_folder = Path::new(&quot;qr-codes&quot;);

    let config = ConfigurationBuilder::duration(parameters.calculate_vote_duration())
        .thread_no(threads_no)
        .step_delay(Duration::from_millis(delay))
        .fetch_limit(250)
        .monitor(Monitor::Progress(100))
        .shutdown_grace_period(Duration::from_secs(60))
        .build();

    let load_config = NodeLoadConfig {
        batch_size,
        use_v1: false,
        config,
        criterion: Some(100),
        address: &quot;127.0.0.1:8080&quot;.to_string(),
        qr_codes_folder: Some(qr_codes_folder),
        secrets_folder: None,
        global_pin: &quot;&quot;.to_string(),
        reuse_accounts_lazy: false,
        reuse_accounts_early: false,
        read_pin_from_filename: true,
        use_https: false,
        debug: false,
    };

    let iapyx_load = NodeLoad::new(load_config);
    if let Some(benchmark) = iapyx_load.start().unwrap() {
        assert!(benchmark.status() == Status::Green, &quot;too low efficiency&quot;);
    }

</code></pre>
<h3 id="full-list-of-available-commands-1"><a class="header" href="#full-list-of-available-commands-1">full list of available commands</a></h3>
<p>Full list of commands is available on <code>mjolnir --help</code> command.</p>
<pre><code>mjolnir 0.1.0
Jormungandr Load CLI toolkit

USAGE:
    mjolnir.exe [FLAGS] [SUBCOMMAND]

FLAGS:
        --full-version      display full version details (software version, source version, targets and compiler used)
    -h, --help              Prints help information
        --source-version    display the sources version, allowing to check the source's hash used to compile this
                            executable. this option is useful for scripting retrieving the logs of the version of this
                            application
    -V, --version           Prints version information

SUBCOMMANDS:
    explorer    Explorer load
    fragment    Fragment load
    help        Prints this message or the help of the given subcommand(s)
    passive     Passive Nodes bootstrap
    rest        Rest load
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="registration-service"><a class="header" href="#registration-service">Registration service</a></h1>
<p>Registration service is REST service purely for test purposes which is capable to interact with <a href="https://github.com/input-output-hk/voting-tools/tree/master/registration">voter registration cli</a>, <a href="https://github.com/input-output-hk/cardano-node/tree/master/cardano-cli">cardano cli</a> and <a href="https://github.com/input-output-hk/vit-kedqr">vit-kedqr</a>.</p>
<h2 id="build"><a class="header" href="#build">build</a></h2>
<p>In order to build iapyx in main project folder run:</p>
<pre><code>cd registration-service
cargo build
cargo install --path . --force
</code></pre>
<h2 id="quick-start-2"><a class="header" href="#quick-start-2">quick start</a></h2>
<p>The simplest configuration is available by using command:</p>
<p><code>registration-service --config config.yaml</code></p>
<p>See <a href="registration-service/./configuration.html">config</a> for more details.</p>
<h2 id="clients"><a class="header" href="#clients">clients</a></h2>
<h3 id="cli-2"><a class="header" href="#cli-2">cli</a></h3>
<p>Registration CLI is cli utility tool which help to interact with registration service without manually constructing requests</p>
<p>See <a href="registration-service/./cli.html">cli</a> for more details.</p>
<h3 id="api-2"><a class="header" href="#api-2">api</a></h3>
<p>Example:</p>
<pre><code>    use registration_service::{
        client::rest::RegistrationRestClient, context::State, request::Request,
    };

    ...

    let payment_skey = Path::new(&quot;payment.skey&quot;);
    let payment_skey = Path::new(&quot;payment.vkey&quot;);
    let payment_skey = Path::new(&quot;stake.skey&quot;);
    let payment_skey = Path::new(&quot;stake.vkey&quot;);
    let payment_skey = Path::new(&quot;vote.skey&quot;);
    
    let registration_client =
        RegistrationRestClient::new_with_token(registration_token, registration_address);

    let registration_request = Request {
        payment_skey,
        payment_vkey,
        stake_skey,
        stake_vkey,
        vote_skey,
    };

    let registration_job_id = registration_client.job_new(registration_request).unwrap();

    let wait = WaitBuilder::new().tries(10).sleep_between_tries(10).build();
    println!(&quot;waiting for registration job&quot;);
    let registration_jobs_status = registration_client
        .wait_for_job_finish(registration_job_id.clone(), wait)
        .unwrap();
    println!(&quot;{:?}&quot;, registration_jobs_status);

    let qr_code_path = temp_dir.child(&quot;qr_code&quot;);
    std::fs::create_dir_all(qr_code_path.path()).unwrap();

    let qr_code = registration_client
        .download_qr(registration_job_id.clone(), qr_code_path.path())
        .unwrap();
    let voting_key_sk = registration_client
        .get_catalyst_sk(registration_job_id)
        .unwrap();
</code></pre>
<p>NOTE: see <a href="https://developers.cardano.org/docs/stake-pool-course/handbook/keys-addresses/">cardano cli guide</a> for information how to create payment and stake files.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="registration-cli"><a class="header" href="#registration-cli">Registration CLI</a></h1>
<p>Registration CLI is cli utility tool which help to interact with registration service.</p>
<h2 id="build--install-2"><a class="header" href="#build--install-2">Build &amp; Install</a></h2>
<p>In order to build iapyx in main project folder run:</p>
<pre><code>cd registration-service
cargo build
cargo install --path . --force
</code></pre>
<h2 id="quick-start-3"><a class="header" href="#quick-start-3">Quick Start</a></h2>
<p>The simplest usage example is available by using commands:</p>
<ul>
<li>register new job:
<code>registration-cli job new   --payment-skey payment.skey --payment-vkey payment.vkey  --stake-skey stake.skey --stake-vkey stake.vkey --endpoint https://{ADDRESS}</code></li>
</ul>
<p>NOTE: response of the above call should return <code>job-id</code> which should be used in next call </p>
<p>NOTE: see <a href="https://developers.cardano.org/docs/stake-pool-course/handbook/keys-addresses/">cardano cli guide</a> for information how to create payment and stake files.</p>
<ul>
<li>check job id:
<code>registration-cli job status --job-id {job-id} --endpoint https://{ADDRESS}</code></li>
</ul>
<h3 id="full-list-of-available-commands-2"><a class="header" href="#full-list-of-available-commands-2">full list of available commands</a></h3>
<p>Full list of commands is available on <code>registration-cli --help</code> command.</p>
<pre><code>registration-service 0.1.0

USAGE:
    registration-cli.exe [OPTIONS] --endpoint &lt;endpoint&gt; &lt;SUBCOMMAND&gt;

FLAGS:
    -h, --help       Prints help information
    -V, --version    Prints version information

OPTIONS:
    -e, --endpoint &lt;endpoint&gt;    registration service endpoint [env: REGISTRATION_ENDPOINT=]
    -t, --token &lt;token&gt;          access token [env: REGISTRATION_TOKEN=]

SUBCOMMANDS:
    files     download jobs artifacts
    health    check if registration service is up
    help      Prints this message or the help of the given subcommand(s)
    job       jobs related operations
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h2 id="configuration-1"><a class="header" href="#configuration-1">Configuration</a></h2>
<p>This section describe configuration file which can be passed as argument for registration service:</p>
<ul>
<li><code>port</code>: port on which registration-service will be exposed,</li>
<li><code>jcli</code>: path to jcli executable,</li>
<li><code>result-dir</code>: path to folder which artifacts will be dumped (qr-code etc.),</li>
<li><code>cardano-cli</code>: path to jcli executable,</li>
<li><code>voter-registration</code>: path to jcli executable,</li>
<li><code>vit-kedqr</code>: path to jcli executable,</li>
<li><code>network</code>: network type. Possible values: 
<ul>
<li><code>mainnet</code></li>
<li><code>{ &quot;testnet&quot;: 1097911063 }</code>,</li>
</ul>
</li>
<li><code>token</code>: token limiting access to environment. Must be provided in header <code>API-Token</code> for each request</li>
</ul>
<p>Example:</p>
<pre><code class="language-yaml">  &quot;port&quot;: 8080,
	&quot;jcli&quot;: &quot;jcli&quot;,
	&quot;result-dir&quot;: &quot;/persist&quot;,
	&quot;cardano-cli&quot;: &quot;./cardano-cli&quot;,
	&quot;voter-registration&quot;: &quot;./voter-registration&quot;,
	&quot;vit-kedqr&quot;: &quot;./vit-kedqr&quot;,
	&quot;network&quot;: &quot;mainnet&quot;,
	&quot;token&quot;: &quot;...&quot;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="snapshot-trigger-service"><a class="header" href="#snapshot-trigger-service">Snapshot trigger service</a></h1>
<p>Service which operates on top of <a href="https://github.com/input-output-hk/voting-tools">voting tools</a> and is a interface improvement which expose voting tools as a REST service.</p>
<h2 id="build-1"><a class="header" href="#build-1">build</a></h2>
<p>In order to build snapshot-trigger-service in main project folder run:</p>
<pre><code>cd snapshot-trigger-service
cargo build
cargo install --path . --force
</code></pre>
<h2 id="quick-start-4"><a class="header" href="#quick-start-4">quick start</a></h2>
<p>The simplest configuration is available by using command:</p>
<p><code>snapshot-trigger-service --config config.yaml</code></p>
<p>See <a href="snapshot-service/./configuration.html">config</a> for more details.</p>
<h3 id="usage"><a class="header" href="#usage">Usage</a></h3>
<p>In order to start new job one need to send POST request like below:</p>
<pre><code>curl --location --request POST 'https://snapshot.io/api/job/new' \
--header 'API-Token: ...' \
--header 'Content-Type: application/json' \
--data-raw '{
    &quot;threshold&quot;: 2000000, // IN Lovelace
    &quot;slot-no&quot;: 31842935
}'
</code></pre>
<p>Response will contains job status:
<code>b0b7b774-7263-4dce-a97d-c167169c8f27</code></p>
<p>Then query for job status:</p>
<pre><code>curl --location --request GET 'https://snapshot.io/api/job/status/b0b7b774-7263-4dce-a97d-c167169c8f27' \
--header 'API-Token: ...'
</code></pre>
<p>and finally fetch snapshot:</p>
<pre><code>curl --location --request GET 'https://snapshot.io/api/job/files/get/b0b7b774-7263-4dce-a97d-c167169c8f27/snapshot.json' \
--header 'API-Token: ...'
</code></pre>
<p>which has form:</p>
<pre><code>{
    &quot;initial&quot;: [
        {
            &quot;fund&quot;: [
                {
                    &quot;address&quot;: &quot;ca1q5yr504t56ruuwrp5zxpu469t9slk0uhkefc7admk7wqrs24q6nxwyhwjcf&quot;,
                    &quot;value&quot;: 14463
                },
                {
                    &quot;address&quot;: &quot;ca1q5ynl2yqez8lmuaf3snvgcw885c9hxxq6uexeevd4al8pct7vx69sljvzxe&quot;,
                    &quot;value&quot;: 9991
                },
....
</code></pre>
<h2 id="clients-1"><a class="header" href="#clients-1">clients</a></h2>
<h3 id="cli-3"><a class="header" href="#cli-3">cli</a></h3>
<p>Snapshot CLI is cli utility tool which help to interact with snapshot trigger service without manually constructing requests</p>
<p>See <a href="snapshot-service/./cli.html">cli</a> for more details.</p>
<h3 id="api-3"><a class="header" href="#api-3">api</a></h3>
<p>Example:</p>
<pre><code>    use snapshot_trigger_service::{
        client::rest::SnapshotRestClient,
        config::JobParameters,
        State,
    };

    let job_param = JobParameters {
        slot_no: Some(1234567),
        tag: Some(&quot;fund1&quot;.to_string()),
    };

    let snapshot_token=  &quot;...&quot;;
    let snapshot_address =  &quot;...&quot;;

    let snapshot_client =
        SnapshotRestClient::new_with_token(snapshot_token.into(), snapshot_address.into());

    let snapshot_job_id = snapshot_client.job_new(job_params).unwrap();
    let wait = WaitBuilder::new().tries(10).sleep_between_tries(10).build();

    let snapshot_jobs_status =
        snapshot_client.wait_for_job_finish(snapshot_job_id.clone(), wait)?;

    let snapshot = snapshot_client.get_snapshot(snapshot_job_id)?;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="registration-cli-1"><a class="header" href="#registration-cli-1">Registration CLI</a></h1>
<p>Registration CLI is cli utility tool which help to interact with registration service.</p>
<h2 id="build--install-3"><a class="header" href="#build--install-3">Build &amp; Install</a></h2>
<p>In order to build registration-service in main project folder run:</p>
<pre><code>cd registration-service
cargo build
cargo install --path . --force
</code></pre>
<h2 id="quick-start-5"><a class="header" href="#quick-start-5">Quick Start</a></h2>
<p>The simplest usage example is available by using commands:</p>
<ul>
<li>register new job:
<code>snapshot-cli --endpoint https://snapshot.io job new --tag daily</code></li>
</ul>
<p>NOTE: response of the above call should return <code>job-id</code> which should be used in next call like below:</p>
<p><code>b0b7b774-7263-4dce-a97d-c167169c8f27</code></p>
<ul>
<li>check job id:
<code>snapshot-cli job status --job-id {job-id} --endpoint https://{ADDRESS}</code></li>
</ul>
<h3 id="full-list-of-available-commands-3"><a class="header" href="#full-list-of-available-commands-3">full list of available commands</a></h3>
<p>Full list of commands is available on <code>snapshot-cli --help</code> command.</p>
<pre><code>snapshot-trigger-service 0.1.0

USAGE:
    snapshot-cli.exe [OPTIONS] --endpoint &lt;endpoint&gt; &lt;SUBCOMMAND&gt;

FLAGS:
    -h, --help       Prints help information
    -V, --version    Prints version information

OPTIONS:
    -e, --endpoint &lt;endpoint&gt;    snapshot endpoint [env: SNAPSHOT_ENDPOINT=]
    -t, --token &lt;token&gt;          access token, which is necessary to perform client operations [env: SNAPSHOT_TOKEN=]

SUBCOMMANDS:
    files     retrieve files from snapshot (snapshot outcome etc.)
    health    check if snapshot service is up
    help      Prints this message or the help of the given subcommand(s)
    job       job related commands
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h2 id="configuration-2"><a class="header" href="#configuration-2">Configuration</a></h2>
<p>This section describe configuration file which can be passed as argument for snapshot service:</p>
<ul>
<li>
<p><code>port</code>: port on which registration-service will be exposed,</p>
</li>
<li>
<p><code>result-dir</code>: path to folder which artifacts will be dumped (qr-code etc.),</p>
</li>
<li>
<p><code>voting-tools</code>: voting tools internal parameters section,</p>
<ul>
<li><code>bin</code>: &quot;voting-tools&quot;,</li>
<li><code>network</code>: network type. Possible values: 
<ul>
<li><code>mainnet</code></li>
<li><code>{ &quot;testnet&quot;: 1097911063 }</code>,</li>
<li><code>db</code>: dbsync name,</li>
<li><code>db-user</code>: dbsync user,</li>
<li><code>db-host</code>: dbsync host,</li>
<li><code>scale</code>: voting power multiplier. If 1 then Lovelace is used</li>
</ul>
</li>
</ul>
</li>
<li>
<p><code>voter-registration</code>: path to jcli executable,</p>
</li>
<li>
<p><code>vit-kedqr</code>: path to jcli executable,</p>
</li>
<li>
<p><code>token</code>: token limiting access to environment. Must be provided in header <code>API-Token</code> for each request</p>
</li>
</ul>
<p>Example:</p>
<pre><code class="language-yaml"> &quot;port&quot;: 8080,
	&quot;result-dir&quot;: &quot;/persist/snapshot&quot;,
	&quot;voting-tools&quot;: {
		    &quot;bin&quot;: &quot;voting-tools&quot;,
		    &quot;network&quot;: &quot;mainnet&quot;,
		    &quot;db&quot;: &quot;dbsync&quot;,
		    &quot;db-user&quot;: &quot;dbsync-admin&quot;,
		    &quot;db-host&quot;: &quot;/alloc&quot;,
		    &quot;scale&quot;: 1000000
	},
	&quot;token&quot;: &quot;3568b599a65557b2a2e&quot;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="valgrind"><a class="header" href="#valgrind">valgrind</a></h1>
<p>Valgrind is a Rest API project which is simplified proxy solution for catalyst backend.</p>
<h2 id="build-2"><a class="header" href="#build-2">build</a></h2>
<p>In main project folder run:</p>
<pre><code>cd valgrind
cargo build
</code></pre>
<p>and install:</p>
<p><code>cargo install --path .</code></p>
<h2 id="quick-start-6"><a class="header" href="#quick-start-6">quick start</a></h2>
<p>The simplest configuration is available by using command:</p>
<p><code>valgrind --block0_path block0.bin</code></p>
<p>By default valgrind will be exposed at <code>127.0.0.1:8000</code></p>
<h2 id="client"><a class="header" href="#client">client</a></h2>
<p>Valgrind project provides also API for interacting with proxy server. Usage example:</p>
<pre><code>    use valgrind::client::{ValgrindClient,ValgrindSettings};


    let settings = RestSettings {
        enable_debug: false,
        use_https: false,
        certificate: None,
        cors: None,
    }

    let address = &quot;0.0.0.0:8080&quot;.to_string();

    let client = ValgrindClient::new(address, settings)
    let fragment_logs = client.fragment_logs()?;

</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h2 id="configuration-3"><a class="header" href="#configuration-3">Configuration</a></h2>
<p>This section describe configuration file which can be passed as argument when starting valgrind:</p>
<ul>
<li><code>address</code>: address on which valgrind will be exposed. By default: <code>127.0.0.1:8000</code>,</li>
<li><code>vit-address</code>: vit servicing station address. By default: <code>127.0.0.1:3030</code>,</li>
<li><code>node-address</code>: node address.  By default: <code>127.0.0.1:8080</code>,</li>
<li><code>block0-path</code>: path to block0 executable,</li>
<li><code>cert</code>: path to certificate (for enabling https). Optional,</li>
<li><code>key</code>: path certificate key (for enabling https). Optional,</li>
</ul>
<p>Example:</p>
<pre><code class="language-yaml">   &quot;address&quot;: &quot;127.0.0.1:8000&quot;,
	&quot;vit-address&quot;: &quot;127.0.0.1:3030&quot;,
	&quot;node-address&quot;: &quot;127.0.0.1:8080&quot;,
	&quot;block0-path&quot;: &quot;./block0.bin&quot;,
	&quot;cert&quot;: &quot;certificate.cert&quot;,
	&quot;key&quot;: &quot;certificate.key&quot;,
&quot;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="vitup"><a class="header" href="#vitup">vitup</a></h1>
<p>Vitup is a cli project which is capable to bootstrap catalyst backend which can be exercised by various tools. 
Initial purpose is to provide simple localhost backend for catalyst voting app. </p>
<h2 id="build-3"><a class="header" href="#build-3">build</a></h2>
<p>before building vitup all dependencies need to be installed.</p>
<ul>
<li>valgrind</li>
<li>jormungandr</li>
<li>vit-servicing-station</li>
</ul>
<p>then in order to build vitup in main project folder run:
<code>cargo build</code></p>
<p>and install:</p>
<p><code>cargo install --path vitup</code></p>
<h2 id="quick-start-7"><a class="header" href="#quick-start-7">quick start</a></h2>
<p>The simplest configuration is available by using command:</p>
<p><code>vitup start quick</code></p>
<p>default endpoint will be exposed at <code>0.0.0.0:80</code> all data dumped to <code>.\catalyst</code></p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="configuration-4"><a class="header" href="#configuration-4">Configuration</a></h2>
<p>This section describe configuration file which can be passed as argument when starting vitup or in some cases send to already running environments in order to restart them with new settings</p>
<h3 id="initials"><a class="header" href="#initials">Initials</a></h3>
<h4 id="block0"><a class="header" href="#block0">block0</a></h4>
<p>Allows to provide initial addresses/voters which addresses would be put in block0.
Supported syntax:</p>
<h5 id="above-threshold"><a class="header" href="#above-threshold">above threshold</a></h5>
<p>Amount of wallets which receive more than value defined in <code>static_data.voting_power</code> parameter</p>
<p>Example: </p>
<pre><code>{
	&quot;above_threshold&quot;:30,
    &quot;pin&quot;:&quot;1234&quot;
}
</code></pre>
<p>Pin would be set globally for all 30 addresses </p>
<h5 id="below-threshold"><a class="header" href="#below-threshold">below threshold</a></h5>
<p>Amount of wallets which receive less than value defined in <code>static_data.voting_power</code> parameter </p>
<p>Example: </p>
<pre><code>{
	&quot;below_threshold&quot;:30,
    &quot;pin&quot;:&quot;1234&quot;
}
</code></pre>
<p>Pin would be set globally for all 30 addresses </p>
<h5 id="around-level"><a class="header" href="#around-level">around level</a></h5>
<p>Amount of wallets which have funds around defined level</p>
<p>Example: </p>
<pre><code>{
	&quot;count&quot;:30,
    &quot;level&quot;:1000,
    &quot;pin&quot;:&quot;1234&quot;
}
</code></pre>
<h5 id="zero-funds"><a class="header" href="#zero-funds">zero funds</a></h5>
<p>Amount of wallets which won't have any funds in block0</p>
<p>Example: </p>
<pre><code>{
	&quot;zero_funds&quot;:30,
    &quot;pin&quot;:&quot;1234&quot;
}
</code></pre>
<h5 id="named-wallet"><a class="header" href="#named-wallet">named wallet</a></h5>
<p>Wallet with custom pin and arbitrary funds amount,</p>
<p>Example: </p>
<pre><code>      {
        &quot;name&quot;:&quot;darek&quot;,
        &quot;funds&quot;:8000,
        &quot;pin&quot;:&quot;1111&quot;         
      },
</code></pre>
<h5 id="external-wallet"><a class="header" href="#external-wallet">external wallet</a></h5>
<p>Wallet with address and pin. For users who already generated address outside vitup.</p>
<p>Example: </p>
<pre><code>      {
        &quot;address&quot;:&quot;ca1qknqa67aflzndy0rvkmxhd3gvccme5637qch53kfh0slzkfgv5nwyq4hxu4&quot;,
        &quot;funds&quot;:8000     
      },
</code></pre>
<h4 id="snapshot"><a class="header" href="#snapshot">snapshot</a></h4>
<p>Allows to provide initial addresses/voters which addresses would be put in initial snapshot.
Supported syntax:</p>
<h5 id="random"><a class="header" href="#random">random</a></h5>
<p>Some number of random wallets which receive specified amount of voting power</p>
<p>Example: </p>
<pre><code>  {
    &quot;count&quot;: 2,
    &quot;level&quot;: 5000
  },
</code></pre>
<h5 id="external"><a class="header" href="#external">external</a></h5>
<p>A single entry with specified voting key and voting power</p>
<p>Example: </p>
<pre><code>  {
    &quot;key&quot;:&quot;3877098d14e80c62c071a1d82e3df0eb9a6cd339a5f66e9ec338274fdcd9d0f4&quot;,
    &quot;funds&quot;:300
  }
</code></pre>
<h5 id="named"><a class="header" href="#named">named</a></h5>
<p>A single entry with specified alias from block0 and optional voting power. If voting power is not defined it would be taken from block0 section. If vitup cannot find alias it will produce an error</p>
<p>Example: </p>
<pre><code>  {
    &quot;name&quot;: &quot;darek&quot;,
    &quot;funds&quot;: 100
  },
</code></pre>
<h3 id="vote-plan"><a class="header" href="#vote-plan">vote plan</a></h3>
<h5 id="vote-time"><a class="header" href="#vote-time">vote time</a></h5>
<p>Below parameters describe how long vote would be active, for how long users can vote and when tally period would begin.</p>
<p>In cardano time is divided into epochs which consists of slots. There are 2 parameters that defines how long epoch should last, slot_duration and slots_per_epoch with equation:
<code>epoch_duration = slot_duration * slots_per_epoch</code>.</p>
<p>For example, for given:</p>
<pre><code>slot_duration = 2
slots_per_epoch = 10
</code></pre>
<p>then epoch will lasts 20 seconds.</p>
<p>vote_start, vote_tally, tally_end - describe 2 vote phases: </p>
<ul>
<li>from vote_start to vote_tally : casting vote period, where we gather votes.</li>
<li>from vote_tally to tally_end: tallying vote period, where we gather voting results.</li>
</ul>
<p>Sll above parameters are expressed in epochs. Be aware that <code>slot_duration</code> and <code>slots_per_epoch</code> have influence on time voting phase would start.
For example if we would like to start vote in 5 minutes, allow users to case vote for 20 minutes and give 1 hour for tally operation our setup would be like below:</p>
<pre><code>&quot;vote_start&quot;:1,
&quot;vote_tally&quot;:4,
&quot;tally_end&quot;:20,
&quot;slots_per_epoch&quot;:60,
</code></pre>
<p>See <a href="https://input-output-hk.github.io/jormungandr/concepts/blockchain.html">jormungandr docs</a> for more information.</p>
<p>NOTE: <code>slot_duration</code> is defined in <code>blockchain</code> section of configuration file</p>
<h5 id="private"><a class="header" href="#private">private</a></h5>
<p>If true, then voting is private otherwise public. This parameters basically controls if votes choices are encrypted or not.</p>
<h6 id="representatives_vote_plan"><a class="header" href="#representatives_vote_plan">representatives_vote_plan</a></h6>
<p>TBD, currently not used</p>
<h4 id="example"><a class="header" href="#example">example</a></h4>
<pre><code> &quot;vote_plan&quot;: {
        &quot;vote_time&quot;: {
            &quot;vote_start&quot;: 13,
            &quot;tally_start&quot;: 98,
            &quot;tally_end&quot;: 140,
            &quot;slots_per_epoch&quot;: 3600        
        },
        &quot;private&quot;: true,
        &quot;representatives_vote_plan&quot;: false
    },
  },
</code></pre>
<h5 id="blockchain"><a class="header" href="#blockchain">blockchain</a></h5>
<p>Set of parameters which controls blockchain related configuration.</p>
<p>See <a href="https://input-output-hk.github.io/jormungandr/advanced/01_the_genesis_block.html">jormungandr docs</a> for more information.</p>
<h5 id="slot_duration"><a class="header" href="#slot_duration">slot_duration</a></h5>
<p>Describes how frequent block are produces by network. Slot duration is expressed in seconds. Cannot be longer that 128.</p>
<h5 id="block_content_max_size"><a class="header" href="#block_content_max_size">block_content_max_size</a></h5>
<p>Describes how big a single block can be. Larger blocks can hold more transactions which results in faster transactions processing, however it put more requirements on space and network throughput.</p>
<h5 id="block0_time"><a class="header" href="#block0_time">block0_time</a></h5>
<p>Optional parameter which defines start time of block0. It is useful when one want to defined voting phases that ends and starts precisely in required time. Otherwise block0_time is equal to current time when running vitup</p>
<h6 id="tx_max_expiry_epochs"><a class="header" href="#tx_max_expiry_epochs">tx_max_expiry_epochs</a></h6>
<p>Optional parameter which defines what is the maximum duration (expressed in epochs) of transaction timeout.
Usually it is equal to 1.</p>
<h6 id="consensus_leader_ids"><a class="header" href="#consensus_leader_ids">consensus_leader_ids</a></h6>
<p>Allows to override randomly generated consensus leaders ids.
Useful when we have our own pre-generated leaders keys for nodes.</p>
<h5 id="linear_fees"><a class="header" href="#linear_fees">linear_fees</a></h5>
<p>Transactions fees which defined cost of transaction or vote.</p>
<ul>
<li>constant - constant fee added to each transaction</li>
<li>coefficient - coefficient of each transaction output</li>
<li>certificate - cost of sending certificate.</li>
</ul>
<p><code>constant + transaction.output * coefficient + certificate</code></p>
<p>Example:</p>
<pre><code>  &quot;linear_fees&quot;: {
    &quot;constant&quot;: 1,
    &quot;coefficient&quot;: 1,
    &quot;certificate&quot;: 2
  },
</code></pre>
<p>Above configuration will result in:</p>
<p>For transaction with 1 input and 1 output
<code>1 +  1 * 1 + 0 = 2</code></p>
<p>For vote
<code>1 + 0 * 1 + 2 = 3</code></p>
<h5 id="committees"><a class="header" href="#committees">committees</a></h5>
<p>Committee is a wallet that is capable of tallying voting results.
This setting allows to use predefined committee rather than generate random by vitup.</p>
<h3 id="data"><a class="header" href="#data">data</a></h3>
<p>Section describes static data used for voting. Mostly defines parameters for <a href="https://github.com/input-output-hk/vit-servicing-station">servicing station</a></p>
<h4 id="current-fund"><a class="header" href="#current-fund">current fund</a></h4>
<p>Current fund related settings:</p>
<h5 id="options"><a class="header" href="#options">options</a></h5>
<p>Defines options available for voters. Should be expressed as coma-separated values. For example:</p>
<p><code>options: &quot;yes,no&quot;</code></p>
<h5 id="proposals"><a class="header" href="#proposals">proposals</a></h5>
<p>Number of proposals available for voting</p>
<h5 id="challenges"><a class="header" href="#challenges">challenges</a></h5>
<p>Number of challenges available for voting. Challenge is a container for proposals for the same domain</p>
<h5 id="reviews"><a class="header" href="#reviews">reviews</a></h5>
<p>Number of reviews for proposals</p>
<h5 id="voting_power"><a class="header" href="#voting_power">voting_power</a></h5>
<p>Threshold for voting participation, expressed in ADA</p>
<h5 id="fund_name"><a class="header" href="#fund_name">fund_name</a></h5>
<p>Name of fund</p>
<h5 id="fund_id"><a class="header" href="#fund_id">fund_id</a></h5>
<p>Id of the fund. This parameter also controls behavior of catalyst voting app. If it's changed between two funds, voting app will refresh it state.</p>
<h5 id="dates"><a class="header" href="#dates">dates</a></h5>
<h6 id="proposal_submission_start"><a class="header" href="#proposal_submission_start">proposal_submission_start</a></h6>
<p>Data in <a href="https://datatracker.ietf.org/doc/html/rfc3339#section-5.6">rfc3339</a> format. Defines proposal submission start datetime. </p>
<h6 id="insight_sharing_start"><a class="header" href="#insight_sharing_start">insight_sharing_start</a></h6>
<p>Data in <a href="https://datatracker.ietf.org/doc/html/rfc3339#section-5.6">rfc3339</a> format. Defines proposal insight sharing start datetime. </p>
<h6 id="refine_proposals_start"><a class="header" href="#refine_proposals_start">refine_proposals_start</a></h6>
<p>Data in <a href="https://datatracker.ietf.org/doc/html/rfc3339#section-5.6">rfc3339</a> format. Defines proposal refinement start datetime. </p>
<h6 id="finalize_proposals_start"><a class="header" href="#finalize_proposals_start">finalize_proposals_start</a></h6>
<p>Data in <a href="https://datatracker.ietf.org/doc/html/rfc3339#section-5.6">rfc3339</a> format. Defines proposal finalization start datetime. </p>
<h6 id="proposal_assessment_start"><a class="header" href="#proposal_assessment_start">proposal_assessment_start</a></h6>
<p>Data in <a href="https://datatracker.ietf.org/doc/html/rfc3339#section-5.6">rfc3339</a> format. Defines proposal assessment start datetime. </p>
<h6 id="assessment_qa_start"><a class="header" href="#assessment_qa_start">assessment_qa_start</a></h6>
<p>Data in <a href="https://datatracker.ietf.org/doc/html/rfc3339#section-5.6">rfc3339</a> format. Defines proposal assessment qa start datetime. </p>
<h6 id="snapshot_time"><a class="header" href="#snapshot_time">snapshot_time</a></h6>
<p>Data in <a href="https://datatracker.ietf.org/doc/html/rfc3339#section-5.6">rfc3339</a> format. Defines snapshot datetime.</p>
<h6 id="next_vote_start_time"><a class="header" href="#next_vote_start_time">next_vote_start_time</a></h6>
<p>Data in <a href="https://datatracker.ietf.org/doc/html/rfc3339#section-5.6">rfc3339</a> format. Defines what is the date of next voting. This data will be shown to users after current voting will ends.</p>
<h6 id="next_snapshot_time"><a class="header" href="#next_snapshot_time">next_snapshot_time</a></h6>
<p>Data in <a href="https://datatracker.ietf.org/doc/html/rfc3339#section-5.6">rfc3339</a> format. Defines next snapshot datetime. This data will be shown to users after current voting will ends.</p>
<h4 id="next-funds"><a class="header" href="#next-funds">next funds</a></h4>
<p>Limited subset of settings comparing to <code>current_fund</code> section for next funds</p>
<h5 id="fund_name-1"><a class="header" href="#fund_name-1">fund_name</a></h5>
<p>Name of fund</p>
<h5 id="fund_id-1"><a class="header" href="#fund_id-1">fund_id</a></h5>
<p>Id of the fund. This parameter also controls behavior of catalyst voting app. If it's changed between two funds, voting app will refresh it state.</p>
<h5 id="dates-1"><a class="header" href="#dates-1">dates</a></h5>
<h6 id="proposal_submission_start-1"><a class="header" href="#proposal_submission_start-1">proposal_submission_start</a></h6>
<p>Data in <a href="https://datatracker.ietf.org/doc/html/rfc3339#section-5.6">rfc3339</a> format. Defines proposal submission start datetime. </p>
<h6 id="insight_sharing_start-1"><a class="header" href="#insight_sharing_start-1">insight_sharing_start</a></h6>
<p>Data in <a href="https://datatracker.ietf.org/doc/html/rfc3339#section-5.6">rfc3339</a> format. Defines proposal insight sharing start datetime. </p>
<h6 id="refine_proposals_start-1"><a class="header" href="#refine_proposals_start-1">refine_proposals_start</a></h6>
<p>Data in <a href="https://datatracker.ietf.org/doc/html/rfc3339#section-5.6">rfc3339</a> format. Defines proposal refinement start datetime. </p>
<h6 id="finalize_proposals_start-1"><a class="header" href="#finalize_proposals_start-1">finalize_proposals_start</a></h6>
<p>Data in <a href="https://datatracker.ietf.org/doc/html/rfc3339#section-5.6">rfc3339</a> format. Defines proposal finalization start datetime. </p>
<h6 id="proposal_assessment_start-1"><a class="header" href="#proposal_assessment_start-1">proposal_assessment_start</a></h6>
<p>Data in <a href="https://datatracker.ietf.org/doc/html/rfc3339#section-5.6">rfc3339</a> format. Defines proposal assessment start datetime. </p>
<h6 id="assessment_qa_start-1"><a class="header" href="#assessment_qa_start-1">assessment_qa_start</a></h6>
<p>Data in <a href="https://datatracker.ietf.org/doc/html/rfc3339#section-5.6">rfc3339</a> format. Defines proposal assessment qa start datetime. </p>
<h6 id="snapshot_time-1"><a class="header" href="#snapshot_time-1">snapshot_time</a></h6>
<p>Data in <a href="https://datatracker.ietf.org/doc/html/rfc3339#section-5.6">rfc3339</a> format. Defines snapshot datetime. </p>
<h6 id="next_vote_start_time-1"><a class="header" href="#next_vote_start_time-1">next_vote_start_time</a></h6>
<p>Data in <a href="https://datatracker.ietf.org/doc/html/rfc3339#section-5.6">rfc3339</a> format. Defines what is the date of next voting. This data will be shown to users after current voting will ends.</p>
<h6 id="next_snapshot_time-1"><a class="header" href="#next_snapshot_time-1">next_snapshot_time</a></h6>
<p>Data in <a href="https://datatracker.ietf.org/doc/html/rfc3339#section-5.6">rfc3339</a> format. Defines next snapshot datetime. </p>
<h3 id="service"><a class="header" href="#service">service</a></h3>
<p>Service related settings</p>
<p>NOTE: this section is ignored when only generating data using vitup. </p>
<h5 id="version"><a class="header" href="#version">version</a></h5>
<p>Control version of backend. Manipulating this parameter we can tell voting app to force user to self-update application.</p>
<h5 id="https"><a class="header" href="#https">https</a></h5>
<p>Controls protocol over which vitup is available for client</p>
<h3 id="full-example"><a class="header" href="#full-example">Full Example:</a></h3>
<pre><code>{
   &quot;initials&quot;:{
      &quot;snapshot&quot;:{
         &quot;tag&quot;:&quot;daily&quot;,
         &quot;content&quot;:[
            {
               &quot;count&quot;:2,
               &quot;level&quot;:1234
            },
            {
               &quot;name&quot;:&quot;alice&quot;
            },
            {
               &quot;name&quot;:&quot;bob&quot;,
               &quot;funds&quot;:10001
            }
         ]
      },
      &quot;block0&quot;:[
         {
            &quot;above_threshold&quot;:10,
            &quot;pin&quot;:&quot;1234&quot;
         },
         {
            &quot;name&quot;:&quot;alice&quot;,
            &quot;pin&quot;:&quot;1234&quot;,
            &quot;funds&quot;:10000
         },
         {
            &quot;name&quot;:&quot;bob&quot;,
            &quot;pin&quot;:&quot;1234&quot;,
            &quot;funds&quot;:10000
         },
         {
            &quot;zero_funds&quot;:10,
            &quot;pin&quot;:&quot;1234&quot;
         }
      ]
   },
   &quot;vote_plan&quot;:{
      &quot;vote_time&quot;:{
         &quot;vote_start&quot;:0,
         &quot;tally_start&quot;:134,
         &quot;tally_end&quot;:234,
         &quot;slots_per_epoch&quot;:3600
      },
      &quot;private&quot;:true
   },
   &quot;blockchain&quot;:{
      &quot;slot_duration&quot;:4,
      &quot;block_content_max_size&quot;:20971520,
      &quot;linear_fees&quot;:{
         &quot;constant&quot;:0,
         &quot;coefficient&quot;:0,
         &quot;certificate&quot;:0
      }
   },
   &quot;data&quot;:{
      &quot;current_fund&quot;:{
         &quot;options&quot;:&quot;yes,no&quot;,
         &quot;proposals&quot;:1134,
         &quot;challenges&quot;:23,
         &quot;reviews&quot;:7045,
         &quot;voting_power&quot;:450,
         &quot;fund_name&quot;:&quot;Fund9&quot;,
         &quot;fund_id&quot;:9,
         &quot;dates&quot;:{
            &quot;insight_sharing_start&quot;:&quot;2022-05-01T12:00:00Z&quot;,
            &quot;proposal_submission_start&quot;:&quot;2022-05-02T12:00:00Z&quot;,
            &quot;refine_proposals_start&quot;:&quot;2022-05-03T12:00:00Z&quot;,
            &quot;finalize_proposals_start&quot;:&quot;2022-05-04T12:00:00Z&quot;,
            &quot;proposal_assessment_start&quot;:&quot;2022-05-04T12:00:00Z&quot;,
            &quot;assessment_qa_start&quot;:&quot;2022-05-05T12:00:00Z&quot;,
            &quot;snapshot_time&quot;:&quot;2022-05-07T12:00:00Z&quot;,
            &quot;next_snapshot_time&quot;:&quot;2023-05-07T12:00:00Z&quot;,
            &quot;next_vote_start_time&quot;:&quot;2022-07-14T12:00:00Z&quot;
         }
      },
      &quot;next_funds&quot;:[
         {
            &quot;fund_name&quot;:&quot;Fund10&quot;,
            &quot;fund_id&quot;:10,
            &quot;dates&quot;:{
               &quot;insight_sharing_start&quot;:&quot;2023-05-01T12:00:00Z&quot;,
               &quot;proposal_submission_start&quot;:&quot;2023-05-02T12:00:00Z&quot;,
               &quot;refine_proposals_start&quot;:&quot;2023-05-03T12:00:00Z&quot;,
               &quot;finalize_proposals_start&quot;:&quot;2023-05-04T12:00:00Z&quot;,
               &quot;proposal_assessment_start&quot;:&quot;2023-05-04T12:00:00Z&quot;,
               &quot;assessment_qa_start&quot;:&quot;2023-05-05T12:00:00Z&quot;,
               &quot;snapshot_time&quot;:&quot;2023-05-07T12:00:00Z&quot;,
               &quot;voting_start&quot;:&quot;2023-07-14T12:00:00Z&quot;,
               &quot;voting_tally_end&quot;:&quot;2023-07-14T12:00:00Z&quot;,
               &quot;voting_tally_start&quot;:&quot;2023-07-14T12:00:00Z&quot;,
               &quot;next_snapshot_time&quot;:&quot;2023-07-07T12:00:00Z&quot;,
               &quot;next_vote_start_time&quot;:&quot;2023-07-14T12:00:00Z&quot;
            }
         }
      ]
   },
   &quot;version&quot;:&quot;3.8&quot;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h2 id="data-generation"><a class="header" href="#data-generation">Data generation</a></h2>
<p>TBD</p>
<div style="break-before: page; page-break-before: always;"></div><h3 id="configuration-modes"><a class="header" href="#configuration-modes">Configuration modes</a></h3>
<p>In order to take out the burden of providing entire configuration vitup has two configuration modes:</p>
<ul>
<li><code>quick</code> - which runs on defaults and allow user to override most important parameters using cli arguments:</li>
</ul>
<p><code>vitup start quick</code></p>
<ul>
<li><code>advanced</code> - which allows to defined full configuration as well as external static files for proposals and challenges</li>
</ul>
<p><code>vitup start advanced</code></p>
<h3 id="run-modes"><a class="header" href="#run-modes">Run Modes</a></h3>
<p>There are 4 run modes available in vitup:</p>
<ul>
<li><code>interactive</code> - where user can push some fragments or query status of nodes </li>
<li><code>endless</code> - [Default] just simple run until stopped by user</li>
<li><code>service</code> - additional manager service will be published at <code>0.0.0.0:3030</code> and allow to control (stop/start) and provides resources over http (qr codes or secret keys)</li>
<li><code>mock</code> - lightweight version of backend with does not spawn any jormungandr or vit-servicing-station services. Mock is also capable of controlling more backend aspect than normal deployment (cut off the connections, rejects all fragments.</li>
</ul>
<h3 id="endless-mode"><a class="header" href="#endless-mode">Endless mode</a></h3>
<p>There are two ways of starting vitup in endless mode. One with limited configuration and one with giving full control. </p>
<p><code>vitup start quick --mode endless ..</code> or</p>
<p><code>vitup start advanced --mode endless ..</code></p>
<h3 id="service-mode"><a class="header" href="#service-mode">Service mode</a></h3>
<p><code>vitup start quick --mode service ..</code> or</p>
<p><code>vitup start advanced --mode service ..</code></p>
<p>Once environment is up one can check status or modify existing environment:</p>
<h4 id="admin-operations"><a class="header" href="#admin-operations">Admin Operations</a></h4>
<ul>
<li>
<p>start -  in order to start new voting</p>
</li>
<li>
<p>stop -  stops currently running vote backend (usually it takes 1 min to stop it)</p>
</li>
<li>
<p>status -  check status of environment: <br/>
a) <code>Idle</code> - environment is not started, <br/>
b) <code>Starting</code> - environment is starting, please wait until its status is <code>Running</code>, <br/>
c) <code>Running</code> - environment is not running and should be accessible, <br/>
d) <code>Stopping</code> - environment is stopping, please wait until its <code>Idle</code> to start it with different parameters,</p>
</li>
<li>
<p>files: 
In order to get qr-codes or secret files from env, two operations are provided: <br/>
a) <code>List Files</code> - list all files in data directory for current run, <br/>
b) <code>Get File</code> - downloads particular file which is visible in <code>List Files</code> operation result,</p>
</li>
</ul>
<h4 id="how-to-send-operations"><a class="header" href="#how-to-send-operations">how to send operations</a></h4>
<p>Voting backend admin console is an REST API accessible over http or https on port 3030. Using POST/GET http methods admin can send some operations to environment.
There are various apps capable of sending REST commands. The simplest is to download <code>Postman</code> and use UI to fire up commands.</p>
<ol>
<li>Download postman: <code>https://www.postman.com/downloads/</code></li>
<li>Review quick guide, how to send dummy request: <code>https://learning.postman.com/docs/getting-started/sending-the-first-request/</code></li>
<li>Review guide, how to send different requests with arguments: <code>https://learning.postman.com/docs/sending-requests/requests/</code></li>
</ol>
<p>Available commands:</p>
<h4 id="check-environment-status"><a class="header" href="#check-environment-status">check environment status</a></h4>
<ul>
<li>Request Type: GET</li>
<li>Endpoint : http://{env_endpoint}:3030/api/control/command/status</li>
<li>Response Example:</li>
</ul>
<pre><code>Running
</code></pre>
<h4 id="start-environment"><a class="header" href="#start-environment">start environment</a></h4>
<p>Default parameters:</p>
<ul>
<li>Request Type: POST</li>
<li>Endpoint : http://{env_endpoint}:3030/api/control/command/start</li>
<li>Response Example:</li>
</ul>
<pre><code>start event received
</code></pre>
<p>Custom parameters:</p>
<ul>
<li>Request Type: POST</li>
<li>Endpoint : http://{env_endpoint}:3030/api/control/command/start/default</li>
<li>BODY: json with configuration</li>
<li>Response Example:</li>
</ul>
<pre><code>start event received
</code></pre>
<p>This requests need to pass environment configuration file in Body.</p>
<h4 id="stop-environment"><a class="header" href="#stop-environment">stop environment</a></h4>
<ul>
<li>Request Type: POST</li>
<li>Endpoint : <code>http://{env_endpoint}:3030/api/control/command/stop</code></li>
<li>Response Example:</li>
</ul>
<pre><code>stop event received
</code></pre>
<h4 id="list-files"><a class="header" href="#list-files">list files</a></h4>
<ul>
<li>Request Type: GET</li>
<li>Endpoint : <code>http://{env_endpoint}:3030/api/control/files/list</code></li>
<li>Response Example:</li>
</ul>
<pre><code>{
    &quot;content&quot;: {
        &quot;network&quot;: [
            &quot;Leader4/node.log&quot;,
            &quot;Leader4/node_config.yaml&quot;,
            &quot;Leader4/node_secret.yaml&quot;,
            &quot;vit_station/vit_config.yaml&quot;,
            &quot;initial_setup.dot&quot;,
            &quot;Leader1/node.log&quot;,
            &quot;Leader1/node_config.yaml&quot;,
            &quot;Leader1/node_secret.yaml&quot;,
            &quot;Leader3/node.log&quot;,
            &quot;Leader3/node_config.yaml&quot;,
            &quot;Leader3/node_secret.yaml&quot;,
            &quot;Leader2/node.log&quot;,
            &quot;Leader2/node_config.yaml&quot;,
            &quot;Leader2/node_secret.yaml&quot;,
            &quot;Wallet_Node/node.log&quot;,
            &quot;Wallet_Node/node_config.yaml&quot;,
            &quot;Wallet_Node/node_secret.yaml&quot;
        ],
        &quot;qr-codes&quot;: [
            &quot;qr-codes/zero_funds_12_0000.png&quot;,
            &quot;qr-codes/wallet_25_above_8000_1234.png&quot;,
            &quot;qr-codes/wallet_12_below_8000_9807.png&quot;,
            &quot;qr-codes/wallet_30_below_8000_9807.png&quot;
        ],
        &quot;private_keys&quot;: [
            &quot;wallet_13_below_8000&quot;,
            &quot;wallet_26_below_8000&quot;,
            &quot;wallet_23_above_8000&quot;,
            &quot;wallet_26_above_8000&quot;
        ],
        &quot;private_data&quot;: [
            &quot;fund_3_committees/ed25519_pk192pta739an4q6phkr4v7pxpgna5544mkkfh8ce6p0auxmk5j89xs0706fp/communication_key.sk&quot;,
            &quot;fund_3_committees/ed25519_pk192pta739an4q6phkr4v7pxpgna5544mkkfh8ce6p0auxmk5j89xs0706fp/encrypting_vote_key.sk&quot;,
            &quot;fund_3_committees/ed25519_pk192pta739an4q6phkr4v7pxpgna5544mkkfh8ce6p0auxmk5j89xs0706fp/member_secret_key.sk&quot;
        ],
        &quot;blockchain&quot;: [
            &quot;block0.bin&quot;,
            &quot;genesis.yaml&quot;
        ]
    },
    &quot;root&quot;: &quot;./vit_backend&quot;,
    &quot;blockchain_items&quot;: [
        &quot;block0.bin&quot;,
        &quot;genesis.yaml&quot;
    ]
}
</code></pre>
<h4 id="list-files-1"><a class="header" href="#list-files-1">list files</a></h4>
<p>User can list or view files available for current voting. to list all available files <code>/api/control/files/list</code> endpoint can be utilized. Then relative path can be provided in <code>/api/control/files/get/..</code> endpoint. For example:
<code>http://{env_endpoint}:3030/api/control/files/get/qr-codes/zero_funds_12_0000.png</code></p>
<ul>
<li>Request Type: GET</li>
<li>Endpoint : http://{env_endpoint}:3030/files/get/{file_path}</li>
</ul>
<h3 id="interactive-mode"><a class="header" href="#interactive-mode">Interactive mode</a></h3>
<p>TBD</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="mock"><a class="header" href="#mock">Mock</a></h2>
<p>For developer convenience an in-memory backend is available. Idea is the same as above but env is more lightweight and does not spawn jormungandr or vit-servicing-station.
Mock is also capable of controlling more backend aspect than normal deployment (cut off the connections, rejects all fragments.</p>
<h3 id="configuration-5"><a class="header" href="#configuration-5">Configuration</a></h3>
<p>Note: it is recommended to run command from <code>vit-testing/vitup</code> folder (then no explicit paths are required to be provided).
Configuration file example is available under <code>vit-testing/vitup/example/mock/config.yaml</code></p>
<h3 id="start"><a class="header" href="#start">Start</a></h3>
<p><code>vitup start mock --config example\mock\config.yaml</code></p>
<h4 id="admin-rest-commands"><a class="header" href="#admin-rest-commands">Admin rest commands</a></h4>
<h5 id="list-files-2"><a class="header" href="#list-files-2">List Files</a></h5>
<pre><code>curl --location --request GET 'http://{mock_address}/api/control/files/list'
</code></pre>
<h5 id="get-file"><a class="header" href="#get-file">Get File</a></h5>
<pre><code>curl --location --request GET 'http://{mock_address}/api/control/files/get/{path_to_file}'
</code></pre>
<h5 id="health"><a class="header" href="#health">Health</a></h5>
<pre><code>curl --location --request GET 'http://{mock_address}/api/health'
</code></pre>
<h5 id="change-fund-id"><a class="header" href="#change-fund-id">Change Fund Id</a></h5>
<pre><code>curl --location --request POST 'http://{mock_address}/api/control/command/fund/id/{new_fund_id}'
</code></pre>
<h5 id="add-new-fund"><a class="header" href="#add-new-fund">Add new fund</a></h5>
<pre><code>curl --location --request PUT 'http://{mock_address}/api/control/command/fund/update' \
--header 'Content-Type: application/json' \
--data-raw '
{
  &quot;id&quot;: 20,
  &quot;fund_name&quot;: &quot;fund_3&quot;,
  &quot;fund_goal&quot;: &quot;How will we encourage developers and entrepreneurs to build Dapps and businesses on top of Cardano in the next 6 months?&quot;,
  &quot;voting_power_threshold&quot;: 8000000000,
  &quot;fund_start_time&quot;: &quot;2022-05-04T10:50:41Z&quot;,
  &quot;fund_end_time&quot;: &quot;2022-05-04T11:00:41Z&quot;,
  &quot;next_fund_start_time&quot;: &quot;2022-06-03T10:40:41Z&quot;,
  &quot;registration_snapshot_time&quot;: &quot;2022-05-04T07:40:41Z&quot;,
  &quot;next_registration_snapshot_time&quot;: &quot;2022-06-02T10:40:41Z&quot;,
  &quot;chain_vote_plans&quot;: [
    {
      &quot;id&quot;: 2136640212,
      &quot;chain_voteplan_id&quot;: &quot;ad6eaebafd2cca7e1829df26c57b340a98b9d513b7eddec8561883f1b99f3b9e&quot;,
      &quot;chain_vote_start_time&quot;: &quot;2022-05-04T10:50:41Z&quot;,
      &quot;chain_vote_end_time&quot;: &quot;2022-05-04T11:00:41Z&quot;,
      &quot;chain_committee_end_time&quot;: &quot;2022-05-04T11:10:41Z&quot;,
      &quot;chain_voteplan_payload&quot;: &quot;public&quot;,
      &quot;chain_vote_encryption_key&quot;: &quot;&quot;,
      &quot;fund_id&quot;: 20
    }
  ],
  &quot;challenges&quot;: [
    {
      &quot;id&quot;: 1,
      &quot;challenge_type&quot;: &quot;community-choice&quot;,
      &quot;title&quot;: &quot;Universal even-keeled installation&quot;,
      &quot;description&quot;: &quot;Upgradable&quot;,
      &quot;rewards_total&quot;: 7686,
      &quot;proposers_rewards&quot;: 844,
      &quot;fund_id&quot;: 20,
      &quot;challenge_url&quot;: &quot;http://schneider-group.info&quot;,
      &quot;highlights&quot;: {
        &quot;sponsor&quot;: &quot;Kreiger and Wuckert and Sons&quot;
      }
    }
  ]
}

'
</code></pre>
<h5 id="accept-all-fragments"><a class="header" href="#accept-all-fragments">Accept all Fragments</a></h5>
<p>Makes mock to accept all further fragments sent to environment</p>
<pre><code>curl --location --request POST 'http://{mock_address}/api/control/command/fragments/accept'
</code></pre>
<h5 id="reject-all-fragments"><a class="header" href="#reject-all-fragments">Reject all Fragments</a></h5>
<p>Makes mock to reject all further fragments sent to environment</p>
<pre><code>curl --location --request POST 'http://{mock_address}/api/control/command/fragments/reject'
</code></pre>
<h5 id="hold-all-fragments"><a class="header" href="#hold-all-fragments">Hold all Fragments</a></h5>
<p>Makes mock to hold  all further fragments sent to environment</p>
<pre><code>curl --location --request POST 'http://{mock_address}/api/control/command/fragments/pending'
</code></pre>
<h5 id="reset-fragment-strategy"><a class="header" href="#reset-fragment-strategy">Reset Fragment strategy</a></h5>
<p>Makes mock to validate all further fragments sent to environment</p>
<pre><code>curl --location --request POST 'http://{mock_address}/api/control/command/fragments/reset'
</code></pre>
<h5 id="make-backend-unavailable"><a class="header" href="#make-backend-unavailable">Make backend unavailable</a></h5>
<p>Mock will reject all connections (returns 500)</p>
<pre><code>curl --location --request POST 'http://{mock_address}/api/control/command/available/false'
</code></pre>
<h5 id="make-backend-available"><a class="header" href="#make-backend-available">Make backend available</a></h5>
<p>Mock will accept all connections</p>
<pre><code>curl --location --request POST 'http://{mock_address}/api/control/command/available/true'
</code></pre>
<h5 id="make-account-endpoint-unavailable"><a class="header" href="#make-account-endpoint-unavailable">Make account endpoint unavailable</a></h5>
<p>Mock will reject n calls to account endpoint and as a result voting app won't receive voting power for some time.
This endpoint assume that one who changes block-account endpoint knows what is the frequency of calls from client
and ultimately can be translated to some time of unavailability.</p>
<pre><code>curl --location --request POST 'http://{mock_address}/api/control/command/block-account/{number_of_calls_to_reject}'
</code></pre>
<h5 id="make-account-endpoint-available"><a class="header" href="#make-account-endpoint-available">Make account endpoint available</a></h5>
<p>Mock will reset account endpoint unavailability </p>
<pre><code>curl --location --request POST 'http://{mock_address}/api/control/command/block-account/reset'
</code></pre>
<h5 id="add-new-voters-snapshot-for-specific-tag"><a class="header" href="#add-new-voters-snapshot-for-specific-tag">Add new voters snapshot for specific tag</a></h5>
<p>Add (or overwrite) voters snapshot for this particular tag</p>
<pre><code>curl --location --request POST 'http://{mock_address}/api/control/command/snapshot/add/{tag}' \
--header 'Content-Type: application/json' \
--data-raw '
  [{&quot;voting_group&quot;:&quot;direct&quot;,&quot;voting_key&quot;:&quot;241799302733178aca5c0beaa7a43d054cafa36ca5f929edd46313d49e6a0fd5&quot;,&quot;voting_power&quot;:10131166116863755484},{&quot;voting_group&quot;:&quot;dreps&quot;,&quot;voting_key&quot;:&quot;0e3fe9b3e4098759df6f7b44bd9b962a53e4b7b821d50bb72cbcdf1ff7f669f8&quot;,&quot;voting_power&quot;:9327154517439309883}]'
</code></pre>
<h5 id="add-new-voters-snapshot-for-specific-tag-1"><a class="header" href="#add-new-voters-snapshot-for-specific-tag-1">Add new voters snapshot for specific tag</a></h5>
<p>Create snapshot json which can be uploaded to mock by using <code>../snapshot/add</code> command. See <a href="vitup/./configuration.html">mock configuration</a> for more details. Example:</p>
<pre><code>curl --location --request POST 'http://{mock_address}/api/control/command/snapshot/create' \
--header 'Content-Type: application/json' \
--data-raw '{
    &quot;tag&quot;: &quot;daily&quot;,
    &quot;content&quot;: [
    {
        &quot;count&quot;: 2,
        &quot;level&quot;: 5000
    },
    {
        &quot;name&quot;: &quot;darek&quot;,
        &quot;funds&quot;: 100
    },
    {
        &quot;key&quot;:&quot;318947a91d109da7109feaf4625c0cc4e83fe1636ed19408e43a1dabed4090a3&quot;,
        &quot;funds&quot;:300
    }
]
}'
</code></pre>
<h5 id="reset-environment"><a class="header" href="#reset-environment">Reset environment</a></h5>
<p>Resets environment data</p>
<pre><code>curl --location --request POST 'http://{mock_address}/api/control/command/reset' \
--header 'Content-Type: application/json' \
--data-raw '{ 
  &quot;initials&quot;: {
    &quot;block0&quot;: [
      { 
        &quot;above_threshold&quot;: 10,
        &quot;pin&quot;: &quot;1234&quot;
      },
      {
        &quot;name&quot;: &quot;darek&quot;,
        &quot;pin&quot;: &quot;1234&quot;,
        &quot;funds&quot;: 10000
      }
    ]
  },
  &quot;vote_plan&quot;: {
        &quot;vote_time&quot;: {
            &quot;vote_start&quot;: 0,
            &quot;tally_start&quot;: 100,
            &quot;tally_end&quot;: 140,
            &quot;slots_per_epoch&quot;: 3600
        },
        &quot;private&quot;: true
  },
  &quot;blockchain&quot;: {
    &quot;slot_duration&quot;: 2,
    &quot;block_content_max_size&quot;: 20971520,
    &quot;block0_time&quot;: &quot;2022-03-17T05:00:00Z&quot;,
    &quot;linear_fees&quot;: {
       &quot;constant&quot;: 0,
       &quot;coefficient&quot;: 0,
       &quot;certificate&quot;: 0
    }
  },
  &quot;data&quot;: {
    &quot;options&quot;: &quot;yes,no&quot;,
    &quot;snapshot_time&quot;: &quot;2022-01-06T11:00:00Z&quot;,
    &quot;next_snapshot_time&quot;: &quot;2022-04-07T11:00:00Z&quot;,
    &quot;next_vote_start_time&quot;: &quot;2022-04-11T11:00:00Z&quot;,
    &quot;proposals&quot;: 936,
    &quot;challenges&quot;: 25,
    &quot;reviews&quot;: 5190,    
    &quot;voting_power&quot;: 450,
    &quot;fund_name&quot;: &quot;Fund7&quot;,
    &quot;fund_id&quot;: 6
  },
  &quot;version&quot;:&quot;3.6&quot;
}'
</code></pre>
<h5 id="health-1"><a class="header" href="#health-1">Health</a></h5>
<p>Checks if mock is up</p>
<pre><code>curl --location --request POST 'http://{mock_address}/api/control/health'
</code></pre>
<h5 id="logs"><a class="header" href="#logs">Logs</a></h5>
<p>Mock stores record of each request send to it. This endpoint gets all logs from mock</p>
<pre><code>curl --location --request POST 'http://{mock_address}/api/control/logs/get'
</code></pre>
<h4 id="admin-cli"><a class="header" href="#admin-cli">Admin cli</a></h4>
<p>Admin CLI is an alternative for all above calls, available under vitup project.</p>
<p>example:</p>
<pre><code>vitup-cli --endpoint {mock} disruption control health
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        <script type="text/javascript">
        window.addEventListener('load', function() {
            MathJax.Hub.Register.StartupHook('End', function() {
                window.setTimeout(window.print, 100);
            });
        });
        </script>
    </body>
</html>
